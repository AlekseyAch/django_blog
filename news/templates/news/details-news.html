{% include "main/header.html" %}


<!-- Page heading start -->
    <div
      class="xl:max-w-[1350px] lg:max-w-[960px] md:max-w-2xl sm:max-w-xl xl mx-auto px-3 pt_120 pb_120"
    >
      <div class="flex justify-center">
        <div>
          <div class="text-center">
            <h1
              class="lg:text-6xl sm:text-4xl text-3xl text-white lg:mb-10 sm:mb-9 mb-6 font-bold"
            >
                {{ news_post.title }}
            </h1>
            <ul
              class="flex items-center justify-center sm:flex-nowrap flex-wrap gap-3"
            >
              <li class="text-2xl font-caveat">
                <a href="/" class="text-white">–ì–ª–∞–≤–Ω–∞—è</a>
              </li>
              <li class="text-white text-2xl">/</li>
              <li class="text-clr_base font-caveat text-2xl">
                {{ news_post.title }}
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Page heading end -->

    <section class="pb_120">
      <div class="xl:max-w-[1350px] lg:max-w-[960px] md:max-w-2xl sm:max-w-xl xl mx-auto px-3">
        <div class="grid lg:grid-cols-[66.66%_auto] gap-6">
          <div>
            <div class="" data-aos="fade-up" data-aos-duration="1000">
              <a class="overflow-hidden block w-full">
                <img src="{{ news_post.text_img.url }}" alt="–ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏" alt="img" class="w-full overflow-hidden duration-500"/>
              </a>
              <div class=" py-[30px]">
                <div class="lg:mb-[30px] mb-5" data-aos="fade-up" data-aos-duration="1400">
                  <span class=" text-lg font-medium text-white border-b border-b-clr_cusborder xl:pb-[30px] pb-5 xl:mb-7 mb-[19px] block">
                    <a href=""> {{ news_post.category.category }} </a> –ê–≤—Ç–æ—Ä: {{ news_post.author }} / –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ {{ news_post.date }} / –ö–æ–º–µ–Ω—Ç–∞—Ä–∏–∏: {% with num_reviews=news_post.reviews_set.count %}{{ num_reviews }}{% endwith %} </span>
                  <div class="text-clr_pra text-base">{{ news_post.text_blocks|safe }}</div>
                </div>
              </div>
              <div class=" bg-common_bg xl:mb-[60px] mb-10 rounded-lg xl:p-[30px] sm:p-5 py-5 px-[14px] flex items-center xl:justify-between justify-center xl:flex-nowrap flex-wrap gap-5">
                <div class=" flex items-center sm:gap-5 gap-[10px]">
                  <span class=" white text-xl font-medium text-white">–¢–µ–≥–∏ –∑–∞–ø–∏—Å–∏ :</span>
                  {% for tag in news_post.tags.all %}
                      {% if forloop.counter <= 2 %}
                          <a href="{% url 'tag_detail' tag.pk %}" class="rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">{{ tag.title }}</a>
                      {% endif %}
                  {% endfor %}
                </div>
                <div class=" flex items-center gap-5">
                  <span class=" white text-xl font-medium text-white">
                    –ü–æ–¥–µ–ª–∏—Ç—å—Å—è :
                  </span>
                  <ul class=" flex items-center rounded-[10px] bg-[rgb(29_29_29_)] py-[10px] px-5 gap-5">
                    <li>
                      <a>
                        <i class="bi-facebook text-white duration-500 hover:text-clr_base">
                        </i>
                      </a>
                    </li>
                    <li>
                      <a>
                        <i class="bi-twitter text-white duration-500 hover:text-clr_base">
                        </i>
                      </a>
                    </li>
                    <li>
                      <a>
                        <i class="bi-linkedin text-white duration-500 hover:text-clr_base">
                        </i>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div >
                <div class=" bg-common_bg p-[30px] rounded-lg">
                  <h3 class="mb-5 text-white sm:text-[32px] text-[26px] font-semibold">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
                  <form action="{% url 'add_reviews' news_post.id %}" method="post" class="flex flex-col gap-6 lg:mb-10 mb-8">
                    {% csrf_token %}
                    <div class="w-full">
                      <input type="text" placeholder="–ò–º—è" name="name" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                    </div>
                    <div class="w-full">
                      <input type="email" placeholder="Email" name="email" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                    </div>
                    <div class="w-full">
                      <input type="text" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" name="vork_user" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                    </div>

                    <div>
                      <textarea name="text_rev" rows="5" placeholder="–í–∞—à –æ—Ç–∑—ã–≤" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"></textarea>
                    </div>
                    <button href="" type="submit" class="w-[250px] flex justify-center items-center gap-2 font-medium px-[30px] pt-5 pb-[21px] text-lg leading-[120%] capitalize relative bg-clr_base overflow-hidden rounded-[5px] duration-500 text-clr_subtitle before:absolute before:content-[''] before:bottom-full before:bg-[#aad302] before:left-0 before:w-full before:h-full before:duration-500 before:bg-opacity-80 hover:before:bottom-0">
                      <span class="z-10 relative duration-500">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</span><i class="bi-arrow-right z-10 relative duration-500 text-xl"></i>
                    </button>
                  </form>
                  <h3 class="mb-5 text-white sm:text-[26px] text-[18px] font-semibold">–û—Ç–∑—ã–≤—ã –æ —Å—Ç–∞—Ç—å–µ: {{ news_post.title }}</h3>
                  <p class="text-clr_pra mb-[30px]">–í—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –æ—Ç–∑—ã–≤–∞–º–∏ –Ω–∏–∂–µ –∏ —Ç–∞–∫ –∂–µ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</p>
                  {% if news_post.reviews_set.all %}
                    {% for revs in news_post.reviews_set.all %}
                        <div class="swiper-slide relative">
                            <div class="review-content">
                                <i class="sm:text-xl text-base text-clr_white sm:mb-10 mb-5 block">
                                    {{ revs.text_rev|safe }}
                                </i>
                                <h4 class="text-clr_base mb-2 font-semibold text-2xl leading-[130%]">
                                    {{ revs.name }}
                                </h4>
                                <span class="text-lg text-clr_pra">{{ revs.vork_user }}</span>
                            </div>
                            <div class="flex justify-between items-center mt-2">
                                <button class="reply-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra" onclick="toggleButton(this, '{{ revs.name }}', '{{ revs.id }}', 'addReview_{{ revs.id }}')">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                                <div class="flex gap-4">
                                    <button class="like-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">üëç</button>
                                    <button class="dislike-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">üëé</button>
                                    <button class="share-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">üí´</button>
                                </div>
                            </div>

                            <!-- –§–æ—Ä–º–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Ç–∑—ã–≤ -->
                            <form action="{% url 'add_response' news_post.id %}" method="post" class="reply-form hidden mt-4">
                                {% csrf_token %}
                                <div class="flex gap-4 mb-2">
                                    <input type="text" placeholder="–ò–º—è" name="name_res" class="flex-1 py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                                    <input type="text" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" name="vork_user_res" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                                    <input type="email" placeholder="Email" name="email_res" class="flex-1 py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"/>
                                </div>
                                <textarea name="text_rev_res" rows="5" id="textRevsName_{{ revs.id }}" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none mb-2"></textarea>
                                <input type="hidden" name="news_perent_res" value="{{ news_post.id }}">
                                <input type="hidden" name="parent_review_id" value="{{ revs.id }}">
                                <button type="submit" class="w-[150px] bg-clr_base py-3 rounded-[10px] transition duration-300 hover:bg-[#aad302] mt-2">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                            </form>

                            <!-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤ -->
                            {% if revs.response_set.all %}
                                {% for revs_resp in revs.response_set.all %}
                                    <div class="swiper-slide relative mt-12">
                                        <div class="review-content">
                                            <i class="sm:text-xl text-base text-clr_white sm:mb-10 mb-5 block">
                                                {{ revs_resp.text_rev_res|safe }}
                                            </i>
                                            <h4 class="text-clr_base mb-2 font-semibold text-2xl leading-[130%]">
                                                {{ revs_resp.name_res }}
                                            </h4>
                                            <span class="text-lg text-clr_pra">{{ revs_resp.vork_user_res }}</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center mt-2">
                                        <button class="reply-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra" onclick="toggleButton(this, '{{ revs.name }}', '{{ revs.id }}', 'addReview_{{ revs.id }}')">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                                        <div class="flex gap-4">
                                            <button class="like-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">üëç</button>
                                            <button class="dislike-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">üëé</button>
                                            <button class="share-btn rounded-[10px] bg-[rgb(29_29_29_)] sm:py-[12px] py-2 sm:px-5 px-[10px] sm:text-base text-[12px] uppercase text-clr_pra">üí´</button>
                                        </div>
                                    </div>
                                    <form action="{% url 'add_response' news_post.id %}" method="post" class="reply-form hidden mt-4">
                                        {% csrf_token %}
                                        <div class="flex gap-4 mb-2">
                                            <input type="text" placeholder="–ò–º—è" name="name_res" class="flex-1 py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                                            <input type="text" placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å" name="vork_user_res" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none"/>
                                            <input type="email" placeholder="Email" name="email_res" class="flex-1 py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"/>
                                        </div>
                                        <textarea name="text_rev_res" rows="5" id="textRevsName_{{ revs.id }}" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç" class="w-full py-[18px] px-5 rounded-[10px] bg-[rgb(29_29_29)] border border-clr_cusborder text-white outline-none mb-2"></textarea>
                                        <input type="hidden" name="news_perent_res" value="{{ news_post.id }}">
                                        <input type="hidden" name="parent_review_id" value="{{ revs.id }}">
                                        <button type="submit" class="w-[150px] bg-clr_base py-3 rounded-[10px] transition duration-300 hover:bg-[#aad302] mt-2">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                                    </form>
                                {% endfor %}
                            {% else %}
                            {% endif %}
                        </div>
                    {% endfor %}
                {% else %}
                    <!-- –ï—Å–ª–∏ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è —ç—Ç–æ–π –Ω–æ–≤–æ—Å—Ç–∏ -->
                    <p>–û—Ç–∑—ã–≤–æ–≤ —É —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏ –ø–æ–∫–∞ –Ω–µ—Ç. –•–æ—Ç–∏—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–º–∏?</p>
                {% endif %}

                </div>
              </div>
            </div>
          </div>

          <!-- ---------- Right side / sidebar -->
          <div>
            <div class=" border border-clr_cusborder xl:p-[30px] py-5 px-[18px] rounded-lg sticky top-[120px]">
              <div class=" xl:mb-[60px] mb-10">
                <h4 class="text-white border-b border-b-clr_cusborder pb-[14px] mb-[30px] text-2xl font-semibold">
                    –ü–æ–∏—Å–∫
                </h4>
                <form action="{% url 'search' %}" method="GET" class="flex content-center justify-between">
                    <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫" class="w-full bg-transparent py-[10px] pr-[10px] pl-5 h-[60px] border border-clr_cusborder rounded-lg outline-none"/>
                    <button type="submit" class="min-w-[60px] h-[60px] flex items-center justify-center bg-clr_base rounded-tr-lg rounded-br-lg">
                        <i class="text-clr_title text-lg"><Search /></i>
                    </button>
                </form>
              </div>
             <!-- categories -->
                  {% include "main/include/categories-views.html" %}
                <!-- categories -->


              <!-- recent post -->

                  {% include "main/include/recent-post.html" %}

              <!-- recent post -->

              <!-- Tags -->
                  {% include "main/include/tags-views.html" %}
              <!-- Tags -->
            </div>
          </div>
          <!-- ---------- Right side / sidebar -->
        </div>
      </div>
    </section>
<script>
    function toggleButton(button, name, id) {
        if (button.innerHTML === '–û—Ç–≤–µ—Ç–∏—Ç—å') {
            button.innerHTML = '–ó–∞–∫—Ä—ã—Ç—å';
            addReview(name, id, 'addReview_' + id);
        } else {
            button.innerHTML = '–û—Ç–≤–µ—Ç–∏—Ç—å';
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
        }
    }
    function toggleReplyForm(btn) {
        // –ù–∞—Ö–æ–¥–∏–º –±–ª–∏–∂–∞–π—à—É—é —Ñ–æ—Ä–º—É –æ—Ç–≤–µ—Ç–∞ –æ—Ç–∑—ã–≤–∞
        const replyForm = btn.closest('.swiper-slide').querySelector('.reply-form');
        if (!replyForm) return; // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞–π–¥–µ–Ω–∞ –ª–∏ —Ñ–æ—Ä–º–∞

        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —Ñ–æ—Ä–º—ã –æ—Ç–≤–µ—Ç–∞
        replyForm.classList.toggle('hidden');
    }

    document.addEventListener('DOMContentLoaded', function() {
        const replyBtns = document.querySelectorAll('.reply-btn');

        replyBtns.forEach((btn) => {
            btn.addEventListener('click', () => {
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —Ñ–æ—Ä–º—ã –æ—Ç–≤–µ—Ç–∞
                toggleReplyForm(btn);
            });
        });
    });
</script>


{% include "main/footer.html" %}